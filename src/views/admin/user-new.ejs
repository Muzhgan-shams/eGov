<% layout('layouts/layout') -%>
<h1 class="h4 mb-3 text-black">Create Staff User</h1>

<% if (ok === 'created') { %>
  <div class="alert alert-success">Created.</div>
<% } %>
<% if (ok === 'updated') { %>
  <div class="alert alert-success">Updated.</div>
<% } %>
<% if (err) { %>
  <div class="alert alert-danger">Error: <%= err %></div>
<% } %>

<form class="card bg-dark text-light border-light p-3 mb-4" method="post" action="/admin/users/new">
  <div class="row g-3">
    <div class="col-12 col-md-6">
      <label class="form-label text-light">Email</label>
      <input class="form-control bg-dark text-light border-light" type="email" name="email" required>
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label text-light">Name</label>
      <input class="form-control bg-dark text-light border-light" name="name" required>
    </div>
    <div class="col-12 col-md-4">
      <label class="form-label text-light">Role</label>
      <select class="form-select bg-dark text-light border-light" name="role" required>
        <option value="OFFICER">OFFICER</option>
        <option value="DEPT_HEAD">DEPT_HEAD</option>
        <option value="ADMIN">ADMIN</option>
      </select>
    </div>
    <div class="col-12 col-md-4">
      <label class="form-label text-light">Department</label>
      <select class="form-select bg-dark text-light border-light" name="departmentId">
        <option value="">— None —</option>
        <% deps.forEach(d => { %>
          <option value="<%= d.id %>"><%= d.name %></option>
        <% }) %>
      </select>
    </div>
    <div class="col-12 col-md-4">
      <label class="form-label text-light">Temp Password</label>
      <input class="form-control bg-dark text-light border-light" name="password" placeholder="default: changeme123">
    </div>
  </div>
  <div class="mt-3">
    <button class="btn btn-success">Save</button>
    <a class="btn btn-outline-light ms-2" href="/admin">Back</a>
  </div>
</form>